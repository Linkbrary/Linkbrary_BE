package com.linkbrary.domain.link.service;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.linkbrary.domain.link.entity.Link;
import org.apache.hc.client5.http.ClientProtocolException;
import org.apache.hc.client5.http.classic.methods.HttpGet;
import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;
import org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;
import org.apache.hc.client5.http.impl.classic.HttpClients;
import org.apache.hc.core5.http.HttpEntity;
import org.apache.hc.core5.http.io.HttpClientResponseHandler;
import org.apache.hc.core5.http.io.entity.EntityUtils;

import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;


public class ApiService {


    

//    public static void main(String[] args) throws Exception {
//        ApiService apiService = new ApiService();
//        String response = apiService.callExternalApi("https://n.news.naver.com/article/293/0000054550?sid=110");
//        System.out.println(response);
//        //String jsonString = "{ \"title\": \"[박종면칼럼] 임종룡 회장의 '적소이고대'(積小以高大)\", \"content\": \"금융은 슬로우(Slow) 비즈니스…하루아침에 안돼 증권·보험사 인수해도 제몫 하려면 5~10년 걸려 사모펀드 포함 과점주주들 CEO 믿고 기다려줘야 국내 대표 금융그룹의 시가총액을 비교해 보면 금융업이 얼마나 슬로우(slow) 비즈니스인지 알 수 있습니다. 매년 5월 말 주가 기준으로 2013년부터 올해까지 비교해 보면 2013년부터 2020년까지 8년간 신한금융이 1위이고 다음이 KB금융-하나금융-우리금융-기업은행 순입니다. 시총 순위가 바뀌는 건 21년부터입니다. KB금융이 1위로 올라섭니다. 23년이 되면 또 변화가 생깁니다. 메리츠금융이 부상합니다. 올들어서는 기업은행과 우리금융이 엎치락뒤치락하지만 5월 현재 시총 순위는 KB-신한-하나-메리츠-기업은행-우리금융 순입니다. 금융업은 뛰어난 CEO가 등장해 혁신적으로 경영을 한다고 하루아침에 성과를 거두는 업이 아닙니다. KB금융 윤종규 전 회장의 사례처럼 금융은 최소 5~10년 공을 들여야 성과가 나옵니다. 금융위원장과 NH농협금융 회장 등 민관을 두루 거치면서 위기 때마다 능력을 발휘해 '해결사'로 불리는 임종룡 우리금융 회장이 취임한 지 1년이 조금 넘었습니다. 과거 NH농협금융 회장 시절 우리투자증권을 인수해 하루아침에 NH농협금융을 주요 금융그룹 반열에 올려놓았듯이 임종룡 회장은 증권사와 보험사 M&A를 통해 우리금융이 KB·신한금융과 경쟁하는 체제로 만들겠다는 각오입니다. 또 옛 상업·한일은행의 전통을 이어받아 '기업금융의 강자\", \"summary\": \"금융은 슬로우 비즈니스, 5~10년 걸려 성과를 거두다.\\n신한금융 8년간 1위 유지, KB금융이 21년부터 1위로 올라섬.\\n임종룡 회장, 5년 후 우리금융이 대표 금융그룹 되고 싶어한다.\", \"thumbnail\": \"https://imgnews.pstatic.net/image/293/2024/05/16/0000054550_001_20240516060101315.png?type=w800\", \"embed\": [[0.00467386469244957, -0.01013952773064375, 0.05116155371069908, -0.6049501299858093, 0.04012316092848778, 0.01649393141269684, 0.0518142506480217, 0.052982062101364136, -0.039348918944597244, -0.021818559616804123, -0.07358112931251526, -0.00938760582357645, -0.02087811380624771, -0.008138240315020084, 0.06786872446537018, -0.034713782370090485, -0.00888054259121418, 0.0318901389837265, 0.00479706097394228, -0.011047258041799068, -0.06932906806468964, 0.0035969545133411884, -0.01804649643599987, -0.012732354924082756, -0.07265486568212509, 0.015404912643134594, -0.008890249766409397, -0.05550742521882057, 0.008419695310294628, 0.06743499636650085, 0.04566308483481407, -0.024218153208494186, 0.009230637922883034, 0.02967449277639389, 0.030180562287569046, 0.01274237409234047, 0.06785396486520767, 0.036747563630342484, 0.004626790061593056, -0.046094197779893875, 0.04295061156153679, -0.0026352249551564455, -0.010121973231434822, -0.015990396961569786, 0.0018083917675539851, -0.02845722809433937, -0.02157561480998993, 0.028870852664113045, 0.04880617558956146, -0.0382196307182312, 0.0247708298265934, 0.021633923053741455, 0.06918523460626602, -0.02889223024249077, 0.04971915856003761, 0.007586749270558357, 0.016091423109173775, -0.021175922825932503, -0.03527621924877167, 0.01395440474152565, 0.0031744770240038633, -0.008443741127848625, 0.029490599408745766, 0.004318390507251024, 0.08382181823253632, -0.042758211493492126, -0.011770808137953281, -0.022491315379738808, -0.014687776565551758, 0.014515063725411892, 0.024351824074983597, 0.017362261191010475, -0.006228181533515453, -0.04419086501002312, -0.008462165482342243, 0.013023794628679752, 0.003533323761075735, -0.022079667076468468, -0.059858132153749466, 0.051424890756607056, -0.01814626343548298, -0.03693292662501335, -0.04355606809258461, 0.006514565087854862, 0.038056276738643646, 0.0038606489542871714, -0.03680199757218361, 0.00038196559762582183, -0.012106295675039291, -0.00492302468046546, -0.02073344960808754, -0.016021762043237686, 0.0262389425188303, -0.03943962976336479, -0.0018636798486113548, 0.022157423198223114, 0.018653329461812973, 0.014955118298530579, 0.04638472944498062, 0.027477558702230453, -0.0066882227547466755, 0.015399469994008541, 0.06188541278243065, -0.036469802260398865, 0.03647730499505997, -0.048774998635053635, -0.026595303788781166, -0.003572567133232951, -0.007089681923389435, 0.05328737944364548, 0.02921837754547596, -0.004133447073400021, 0.0346093587577343, -0.039758455008268356, -0.0028975100722163916, -0.031277768313884735, -0.006201910320669413, -0.0703907310962677, 0.039727527648210526, -0.008065231144428253, 0.022674277424812317, 0.007505884859710932, 0.05099986866116524, -0.03060496784746647, -0.006908349227160215, -0.02096104435622692, -0.009874372743070126, 0.0371989868581295, -0.015100601129233837, -0.0010322413872927427, -0.005774239078164101, 0.020026937127113342, -0.01326157245784998, 0.022117875516414642, 0.009336471557617188, 0.03615513816475868, -0.018043041229248047, -0.03828258067369461, -0.04050882160663605, 0.0038420874625444412, -0.05492677912116051, -0.003571129869669676, 0.0020941083785146475, -0.036991991102695465, -0.010479707270860672, -0.014144585467875004, 0.018370166420936584, -0.00472991494461894, -0.0320923887193203, 0.02195611596107483, -0.039415791630744934, -0.0052899629808962345, -0.009456722997128963, -0.0008398003410547972, 0.010500225238502026, -0.026391157880425453, 0.02464471012353897, 0.07686682045459747, 0.03367890045046806, 0.021940069273114204, 0.015879042446613312, 0.010706891305744648, -7.688453479204327e-05, -0.008489883504807949, -0.024499421939253807, -0.010977420955896378, -0.011073924601078033, 0.0023945935536175966, 0.003535792464390397, -0.028420405462384224, 0.03444544970989227, 0.08073067665100098, 0.0019961604848504066, 0.0656471997499466, -0.00207568914629519, -0.011362830176949501, -0.008531070314347744, -0.0350564680993557, 0.0022340037394315004, 0.006180785596370697, 0.004645597655326128, -0.01884569600224495, 0.000825854716822505, -0.0612916573882103, -0.014773307368159294, 0.017548102885484695, 0.025858888402581215, -0.072550468146801, -0.023973116651177406, 0.004099149722605944, 0.040359970182180405, 0.018431514501571655, 0.0384165458381176, -0.03507918864488602, -0.027224436402320862, -0.012543505989015102, -0.041071437299251556, -0.006581019144505262, 0.037221428006887436, -0.03152590990066528, 0.03797318786382675, 0.06736847758293152, -0.034655168652534485, 0.045229069888591766, 0.004457716830074787, -0.013049840927124023, -0.025714701041579247, -0.05459529161453247, 0.0037305234000086784, 0.01341565977782011, 0.0075940461829304695, -0.03560188040137291, 0.03384619578719139, -0.032583802938461304, 0.04743310809135437, -0.023717394098639488, -0.01153832022100687, 0.004524714779108763, 0.009701471775770187, 0.002417181618511677, 0.0160463098436594, -0.012819696217775345, -0.002878882922232151, 0.02843191660940647, 0.016434935852885246, 0.03757889196276665, -0.025358038023114204, 0.021467356011271477, -0.0166128221899271, 0.005385430995374918, 0.014351391233503819, -0.021869460120797157, 0.0396055206656456, -0.033567607402801514, -0.004348985385149717, -0.014032701961696148, -0.02234734036028385, -0.01675431989133358, 0.03665735945105553, 0.0030041206628084183, -0.033593568950891495, -0.004318120889365673, -0.021517140790820122, 0.0051381541416049, -0.02103048749268055, 0.019140755757689476, 0.020418865606188774, 0.06654269248247147, -0.021961601451039314, 0.017773857340216637, -0.012794825248420238, 0.01859899051487446, 0.05171874165534973, 0.00979642290621996, -0.030183853581547737, -0.0025249612517654896, -0.0270253736525774, -0.07066797465085983, 0.012006029486656189, -0.01844124123454094, -0.02122136577963829, -0.004334069322794676, 0.0780484676361084, -0.014745897613465786, 0.023464541882276535, 0.05123443901538849, -0.011724712327122688, -0.022771824151277542, -0.019877484068274498, 0.01521061360836029, 0.02286224253475666, -0.024702461436390877, 0.030798986554145813, -0.017578652128577232, -0.007289494387805462, -0.004307956900447607, 0.056472454220056534, 0.002101270481944084, 0.0004793195694219321, 0.02928800880908966, -0.019792743027210236, 0.04661557450890541, 0.02336777374148369, 0.027539217844605446, 0.0028538270853459835, 0.013941938988864422, 0.008702895604074001, -0.02445383183658123, -0.01705080457031727, -0.05051109194755554, 0.01866091974079609, -0.012905558571219444, -0.023176420480012894, -0.053615961223840714, 0.034964606165885925, 0.01089794933795929, 0.014711492694914341, 0.034328412264585495, -0.000861514185089618, 0.017959414049983025, -0.01917220838367939, -0.005050958599895239, 0.030983369797468185, 0.03345973789691925, 0.011969753541052341, 0.05177951231598854, 0.010682874359190464, 0.010435785166919231, -0.060286663472652435, -0.062035609036684036, -0.01727982610464096, -0.02147810533642769, 0.041390080004930496, -0.014280639588832855, 0.011021612212061882, 0.02597004547715187, -0.015137752518057823, -0.021360313519835472, -0.028343934565782547, -0.005070268642157316, -0.012024459429085255, 0.04462120309472084, 0.020608818158507347, -0.03560459613800049, 0.039914850145578384, -0.016521403566002846, -0.02940954454243183, 0.03027137741446495, -0.060808174312114716, -0.018650732934474945, 0.004587587900459766, -0.004719305317848921, -0.005455661565065384, -0.0033592060208320618, 0.012443742714822292, -0.02940780110657215, -0.02094253897666931, 0.007857131771743298, -0.016981463879346848, -0.017642773687839508, -0.05890624225139618, 0.0266162920743227, -0.02747698687016964, -0.02960395999252796, -0.03238838538527489, -0.031414542347192764, -0.02629215270280838, 0.016714973375201225, 0.00429763738065958, -0.026802558451890945, -0.005706403404474258, 0.034019485116004944, 0.00503145158290863, 0.017622442916035652, 0.028307640925049782, 0.02673880010843277, -0.018703335896134377, 0.0051724351942539215, -0.006262520793825388, -0.02709178812801838, -0.07092031091451645, 0.027076538652181625, 0.04524211958050728, -0.021880188956856728, 0.008596726693212986, 0.0016300561837852001, -0.05077488720417023, 0.026932721957564354, 0.03698942810297012, 0.0019598316866904497, 0.04640723392367363, 0.03159699961543083, 0.014768166467547417, -0.01986004039645195, -0.03809404745697975, 0.0007598588708788157, 0.008524523116648197, 0.009174135513603687, 0.0014158394187688828, -0.005242336541414261, 0.01638600416481495, -0.06480462104082108, -0.0018456736579537392, -0.011638659052550793, -0.019924728199839592, -0.011432602070271969, 0.013641361147165298, 0.10490935295820236, -0.06631635874509811, -0.042668864130973816, 0.002260717796161771, 0.005547317210584879, -0.009372648783028126, -0.04127639904618263, 0.01293165236711502, 0.003875335678458214, 0.044248174875974655, 0.029742596670985222, 0.009865854866802692, -0.03343730792403221, 0.02128078043460846, -0.035400502383708954, -0.04867527633905411, -0.010907268151640892, -0.02335471846163273, -0.020178668200969696, 0.010753266513347626, 0.01501599233597517, -0.021161997690796852, 0.021457836031913757, -0.009291271679103374, 0.011304199695587158, 0.025439629331231117, 0.0014614301035180688, 0.020870033651590347, -0.00020164635498076677, -0.02052609808743, -0.0012361216358840466, 0.012908929958939552, -0.019517360255122185, -0.031194880604743958, -0.008667594753205776, -0.001347799552604556, 0.005798520985990763, 0.01445545069873333, -0.0037291115149855614, 0.026529517024755478, 0.04276753589510918, 0.05637171491980553, -0.005840821657329798, 0.0692838802933693, 0.0032381427008658648, -0.01817670650780201, 0.024403143674135208, -0.022447751834988594, 0.01896875537931919, -0.01286058034747839, -0.014967531897127628, 0.006363040767610073, 0.002300780965015292, 0.0026818455662578344, -0.011066400445997715, -0.028283292427659035, -0.004589741118252277, -0.052933793514966965, -0.021634964272379875, -0.014610795304179192, -0.057789601385593414, -0.007925140671432018, -0.0011968450853601098, -0.051930952817201614, 0.029924770817160606, 0.05731157213449478, 0.017843568697571754, -0.017534492537379265, -0.07068592309951782, -0.05357764661312103, 0.04266927018761635, 0.0006290962337516248, -0.04775844141840935, 0.02761414460837841, 0.01258363202214241, -0.0410354845225811, 0.012071984820067883, -0.011272607371211052, -0.03341630473732948, 0.019996700808405876, 0.020802266895771027, 0.017986346036195755, -0.010376114398241043, 0.026661252602934837, 0.021707812324166298, -0.024116871878504753, 0.001525384490378201, 0.046869371086359024, -0.027972515672445297, -0.002835130086168647, -0.007034852635115385, 0.00046307305456139147, -0.0013659544056281447, 0.012916894629597664, -0.008406087756156921, 0.001202715327963233, -0.026191942393779755, -0.00085005461005494, 0.010361268185079098, -0.016908707097172737, -0.01207479927688837, -0.034650206565856934, 0.020765993744134903, -0.001316369278356433, -0.028058787807822227, -0.019094109535217285, 0.030643925070762634, -0.006421628408133984, 0.0530230887234211, 0.041067253798246384, 0.00394256878644228, -0.023268282413482666, -0.02705434337258339, -0.04412304237484932, 0.058662258088588715, 0.02534933015704155, -0.010598503984510899, -0.012576714158058167, -0.014134147204458714, -0.004930251277983189, 0.011869832873344421, 0.0024245961103588343, -0.025101259350776672, 0.023066336289048195, -0.00812279898673296, -0.01492169126868248, -0.03203336521983147, 0.021962327882647514, 0.010805978439748287, -0.0032657450065016747, -0.0069376686587929726, 0.019956879317760468, 0.042674534022808075, -0.011090220883488655, -0.01548836100846529, -0.01537646260112524, 0.005395137704908848, 0.005110061727464199, 0.011850404553115368, 0.014280911535024643, 0.007024574093520641, 0.017244070768356323, 0.05963684618473053, 0.03865345939993858, -0.01283673383295536, -0.03413885086774826, -0.04093572124838829, -0.01416631881147623, 0.031370170414447784, -0.026636067777872086, 0.03768020123243332, -0.01831696555018425, -0.0272782351821661, 0.020667683333158493, 0.029085403308272362, -0.005152018275111914, -0.05637780949473381, -0.03011236898601055, 0.014290670864284039, 0.06238719820976257, 0.027676410973072052, -0.028812997043132782, 0.014129037968814373, -0.014918963424861431, 0.025878265500068665, 0.008553262799978256, -0.01776348613202572, 0.054852742701768875, -0.02196509577333927, -0.013913379050791264, -0.028700148686766624, 0.02183046191930771, -0.014301595278084278, -0.015282467007637024, 0.0018265204271301627, 0.01842314563691616, 0.02234932780265808, 0.0021982048638164997, 0.0023392438888549805, 0.04941996932029724, -0.005549382884055376, 0.0074607799760997295, -0.00871972180902958, -0.01444209273904562, -0.023920806124806404, -0.033501286059617996, -0.017429223284125328, -0.06350011378526688, 0.03325778990983963, -0.04837450757622719, 0.013565102592110634, 0.10595633089542389, 0.003923514392226934, 0.004614648874849081, 0.01194898970425129, 0.04367445036768913, -0.031174222007393837, -0.01935805380344391, 0.009478531777858734, 0.043055299669504166, 0.0003645398246590048, -0.03052893839776516, 0.02124820649623871, -0.021084977313876152, 0.023590827360749245, -1.8656843167264014e-05, 0.010841680690646172, 0.01032273005694151, 0.01323478203266859, -0.009212255477905273, 0.02596510574221611, -0.023229675367474556, -0.0005408474244177341, 0.03304160758852959, 0.0011924456339329481, -0.019698547199368477, 0.001703839749097824, -0.007219837047159672, 0.040012113749980927, -0.04261268302798271, -0.02076951414346695, -0.038770031183958054, 0.013028773479163647, 0.008083192631602287, 0.0336686447262764, -0.000387824431527406, 0.013241585344076157, -0.0016629982274025679, -0.014763925224542618, 0.022780872881412506, -0.02472897246479988, 0.008105399087071419, -0.017526503652334213, 0.015865115448832512, 0.013912254013121128, 0.0005286986706778407, -0.012411525472998619, 0.05009937658905983, 0.031017066910862923, -0.032625120133161545, 0.009355822578072548, -0.0020956804510205984, -0.0006070046802051365, 0.03984244540333748, -0.030130907893180847, 0.027300072833895683, 0.04588497430086136, 0.018224064260721207, -0.06142333522439003, -0.002161964774131775, -0.0031056434381753206, 0.01072761695832014, -0.07355295121669769, 0.015364901162683964, 0.039974894374608994, -0.03646032139658928, -0.025763267651200294, 0.027658097445964813, -0.05585826560854912, 0.0198285523802042, -0.041235215961933136, -0.009455359540879726, 0.0023180563002824783, -0.012342934496700764, 0.0477759912610054, 0.00593207823112607, 0.02230587974190712, -0.020333820953965187, 0.011609332635998726, 0.009768092073500156, -0.028773900121450424, 0.0307263545691967, -0.04300296679139137, -0.026190290227532387, -0.006516061257570982, 0.010930062271654606, 0.02857554517686367, 0.006040913984179497, -0.004406028892844915, -0.025983577594161034, 0.008632062003016472, -0.03465883433818817, 0.02579617127776146, 0.0020443641114979982, 0.043862827122211456, -0.02071284130215645, 0.008761788718402386, 0.00021563614427577704, 0.04400863125920296, -0.009368552826344967, -0.008556126616895199, 0.0034485908690840006, -0.01410724874585867, -0.002318314043805003, 0.007801911327987909, -0.006895148660987616, 0.0012593462597578764, 0.0024652774445712566, -5.080867776996456e-05, 0.030265722423791885, -0.00961319636553526, -0.00901862233877182, 0.0005311094573698938, 0.019028855487704277, 0.015777861699461937, -0.023293688893318176, -0.018443187698721886, -0.0018494606483727694, 0.006889358628541231, -0.0034701849799603224, -0.009751955047249794, -0.0036039198748767376, 0.007176355924457312, 0.002788151614367962, 0.04414309561252594, 0.0013568722642958164, 0.02700674906373024, -0.04149787127971649, -0.010454258881509304, 0.029127582907676697, 0.011634524911642075, 0.005498179234564304, 0.020477885380387306, 0.013417758978903294, 0.013014624826610088, 0.007035850081592798, -0.037213098257780075, 0.012534831650555134, -0.0019639539532363415, -0.02850351296365261, -0.012051570229232311, 0.04720010235905647, 0.022209331393241882, -0.03315586596727371, 0.014658791013062, 0.030782341957092285, 0.010697916150093079, 0.00871271826326847, 0.034664999693632126, -0.018000274896621704, 0.008504323661327362, 0.010195917449891567, 0.015152262523770332, -0.019810045138001442, -0.002849683165550232, -0.008711961098015308, -0.0363219678401947, 0.017278917133808136, -0.03614841029047966, 0.005260666832327843, -0.012527042999863625, -0.03117610141634941, -0.011720974929630756, -0.01920110546052456, -0.02192852273583412, -0.0654560998082161, -0.012841248884797096, -0.003629308193922043, 0.04255475848913193, -0.021801196038722992, 0.01652446761727333, -0.06916065514087677, -0.01914077252149582, 0.05976516008377075, 0.014036610722541809, -0.01056776475161314, 0.02223367989063263, 0.016747817397117615, -0.02334488555788994, 0.024782542139291763, 0.003161446191370487, -0.035876259207725525, -0.005133663769811392, 0.04144217073917389, -0.008115781471133232, -0.022449668496847153, -0.06614244729280472, -0.008367037400603294, -0.01911166124045849, -0.05836739391088486, -0.02502739615738392]] }";
//        //System.out.println(jsonString);
//        try {
//            mapJsonToLink(response);
//        } catch (Exception e) {
//            System.out.println(e.getMessage());
//        }
//
//    }
    //Link link = mapJsonToLink(a);
    //System.out.println(link.toString());
}

